<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="1000" d:DesignHeight="600"
        x:Class="HanaGami.MainWindow"
        x:CompileBindings="False"
        Title="HanaGami"
        Width="1080" Height="720">
    <DockPanel>
        <!-- Top Bar -->
        <Border Background="#F0F0F0" DockPanel.Dock="Top" Height="40" VerticalAlignment="Top" BorderBrush="#DDD" BorderThickness="0,0,0,1">
            <Grid ColumnDefinitions="Auto,* ,Auto" VerticalAlignment="Center" Height="40">
                <!-- 좌측 버튼 2개 -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center" Spacing="5">
                    <Button Margin="5,0,0,0" Click="addNote_Click">
                        <!-- + (Add) 아이콘: 단일 십자가 path -->
                        <PathIcon Data="M19 13H13V19H11V13H5V11H11V5H13V11H19V13Z" Width="20" Height="20" />
                    </Button>
                    <Button Margin="5,0,0,0" Click="setting_Click">
                        <!-- 톱니바퀴 (Settings) 아이콘: Material Design 단일 path -->
                        <PathIcon Data="M12 15.5A3.5 3.5 0 1 0 12 8.5A3.5 3.5 0 1 0 12 15.5M19.43 12.98C19.5 12.66 19.5 12.34 19.5 12C19.5 11.66 19.5 11.34 19.43 11.02L21.54 9.37C21.74 9.21 21.79 8.92 21.66 8.68L19.66 5.32C19.53 5.09 19.25 5 19 5.08L16.56 5.81C16.04 5.42 15.5 5.11 14.89 4.89L14.5 2.42C14.47 2.18 14.27 2 14 2H10C9.73 2 9.53 2.18 9.5 2.42L9.11 4.89C8.5 5.11 7.96 5.42 7.44 5.81L5 5.08C4.75 5 4.47 5.09 4.34 5.32L2.34 8.68C2.21 8.92 2.26 9.21 2.46 9.37L4.57 11.02C4.5 11.34 4.5 11.66 4.5 12C4.5 12.34 4.5 12.66 4.57 12.98L2.46 14.63C2.26 14.79 2.21 15.08 2.34 15.32L4.34 18.68C4.47 18.91 4.75 19 5 18.92L7.44 18.19C7.96 18.58 8.5 18.89 9.11 19.11L9.5 21.58C9.53 21.82 9.73 22 10 22H14C14.27 22 14.47 21.82 14.5 21.58L14.89 19.11C15.5 18.89 16.04 18.58 16.56 18.19L19 18.92C19.25 19 19.53 18.91 19.66 18.68L21.66 15.32C21.79 15.08 21.74 14.79 21.54 14.63L19.43 12.98Z" Width="20" Height="20" />
                    </Button>
                </StackPanel>
                <!-- 가운데 영역(비워둠) -->
                <!-- 우측 검색창/버튼 -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center" Spacing="5">
                    <TextBox x:Name="SearchTextBox" Width="180" Watermark="Search..." UseFloatingWatermark="False" />
                    <Button Margin="0,0,0,0" Click="OnSearchClick">
                        <PathIcon Data="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" />
                    </Button>
                </StackPanel>
            </Grid>
            
        </Border>
        <Grid ColumnDefinitions="250,*">
        <!-- Left Panel: Note List -->
        <Grid Grid.Column="0" RowDefinitions="Auto,*" Margin="10">
            <!-- Note List -->
            <ListBox Grid.Row="0" x:Name="NotesListBox" SelectionChanged="OnNoteSelectionChanged">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <PathIcon Data="M12,21L15.6,16.2C14.6,15.45 13.35,15 12,15C10.65,15 9.4,15.45 8.4,16.2L12,21M12,3C7.95,3 4.21,4.34 1.2,6.6L3,9C5.5,7.12 8.62,6 12,6C15.38,6 18.5,7.12 21,9L22.8,6.6C19.79,4.34 16.05,3 12,3M12,9C9.3,9 6.81,9.89 4.8,11.4L6.6,13.8C8.1,12.67 9.97,12 12,12C14.03,12 15.9,12.67 17.4,13.8L19.2,11.4C17.19,9.89 14.7,9 12,9Z"
                                      IsVisible="{Binding IsShared}"
                                      Foreground="Cyan"
                                      Width="16" Height="16" />
                            <TextBlock Text="{Binding Name}" VerticalAlignment="Center" />
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
            <!-- Toolbar with Search 삭제됨 (상단바로 이동) -->
        </Grid>
        
        <!-- Right Panel: Note Detail -->
        <Border Grid.Column="1" BorderBrush="Gray" BorderThickness="1,0,0,0">
            <Panel>
                <Grid x:Name="DetailPanel" Margin="20" IsVisible="False" RowDefinitions="Auto,*">
                    <!-- Note Header -->
                    <Grid Grid.Row="0" ColumnDefinitions="*,Auto,Auto" Margin="0,0,0,10">
                        <TextBlock Grid.Column="0" x:Name="NoteTitleText" FontSize="24" FontWeight="Bold" />
                        <PathIcon Grid.Column="1" 
                                  x:Name="SharedIcon"
                                  Data="M12,21L15.6,16.2C14.6,15.45 13.35,15 12,15C10.65,15 9.4,15.45 8.4,16.2L12,21M12,3C7.95,3 4.21,4.34 1.2,6.6L3,9C5.5,7.12 8.62,6 12,6C15.38,6 18.5,7.12 21,9L22.8,6.6C19.79,4.34 16.05,3 12,3M12,9C9.3,9 6.81,9.89 4.8,11.4L6.6,13.8C8.1,12.67 9.97,12 12,12C14.03,12 15.9,12.67 17.4,13.8L19.2,11.4C17.19,9.89 14.7,9 12,9Z"
                                  Foreground="Cyan"
                                  Width="20" Height="20"
                                  Margin="5,0,0,0"
                                  IsVisible="False" />
                        <Button Grid.Column="2" Margin="5,0,0,0" Click="OnShareClick">
                            <PathIcon Data="M12,1L8,5H11V14H13V5H16M18,23H6C4.89,23 4,22.1 4,21V9A2,2 0 0,1 6,7H9V9H6V21H18V9H15V7H18A2,2 0 0,1 20,9V21A2,2 0 0,1 18,23Z" Foreground="Black" Width="20" Height="20"/>
                        </Button>
                    </Grid>
                    
                    <!-- Note Content -->
                    <WebView Grid.Row="1" x:Name="NoteWebView" IsEnabled="True" />
                </Grid>
                
                <!-- Empty State -->
                <StackPanel x:Name="EmptyStatePanel" 
                            HorizontalAlignment="Center" 
                            VerticalAlignment="Center" 
                            Spacing="10">
                    <PathIcon Data="M19,3A2,2 0 0,1 21,5V19A2,2 0 0,1 19,21H5A2,2 0 0,1 3,19V5A2,2 0 0,1 5,3H19M19,19V5H5V19H19M17,17H7V16H17V17M17,15H7V14H17V15M17,12H7V7H17V12Z"
                              Width="48" Height="48"
                              Foreground="Gray" />
                    <TextBlock Text="Select a note" 
                               FontSize="16"
                               Foreground="Gray" />
                </StackPanel>

                <Grid x:Name="AddPanel" IsVisible="False"
                      Margin="20"
                      RowDefinitions="Auto,Auto,*">
                    <!-- Row 0: Header with Title and Button -->
                    
                    <Grid Grid.Row="0" ColumnDefinitions="*,Auto" Margin="0,0,0,10">
                        <TextBox Grid.Column="0" x:Name="NoteTitleTextBox" Watermark="제목" FontSize="18" />
                        <Button Grid.Column="1" Margin="5,0,0,0" Click="OnAddNoteSaveClick">
                            <PathIcon Data="M17,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3M19,19H5V5H16.17L19,7.83V19M12,12C10.34,12 9,13.34 9,15C9,16.66 10.34,18 12,18C13.66,18 15,16.66 15,15C15,13.34 13.66,12 12,12M6,6H15V10H6V6Z" Foreground="Black" Width="24" Height="24"/>
                        </Button>
                    </Grid>
                    <!-- Row 1: Sync Checkbox -->
                    <CheckBox Grid.Row="1" x:Name="SyncCheckBox" Content="동기화"
                        IsChecked="False"
                        Margin="0,0,0,10" />
                    <!-- Row 2: Content Editor -->
                    <ScrollViewer Grid.Row="2">
                        <TextBox x:Name="NoteContentTextBox"
                            AcceptsReturn="True"
                            TextWrapping="Wrap"
                            MinHeight="200" />
                    </ScrollViewer>
                </Grid>
            </Panel>
        </Border>
        </Grid>
    </DockPanel>
</Window>
